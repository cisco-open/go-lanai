// Package api Generated by lanai_cli codegen. DO NOT EDIT
// Derived from openapi contract - components
package api
{{ with index . "OpenAPIData" }}
    {{ template "registerStructs" args .Components }}
    {{ template "componentSchemaStructs" args .Components.Schemas }}
    {{ template "componentRequestBodiesStructs" args .Components.RequestBodies }}
    {{ template "componentParameterStructs" args .Components.Parameters }}
{{- end }}

{{ define "registerStructs" }}
    {{- $components := index . 0 }}
    {{- $schema := $components.Schemas }}

    {{ template "registerSchemaStructs" args $schema }}

    {{- $requestBodies := $components.RequestBodies }}
    {{ range $requestName, $requestData := $requestBodies }}
        {{- $structName := toTitle $requestName }}
        {{- registerStruct $structName "pkg/api" -}}
    {{- end }}

    {{- $parameters := $components.Parameters }}
    {{ range $parameterName, $parameterData := $parameters }}
        {{- if eq $parameterData.Value.Schema.Value.Type "object" }}
        {{- $structName := toTitle $parameterName }}
        {{ registerStruct $structName "pkg/api" -}}
        {{- end }}
    {{- end }}

{{- end }}

{{ define "registerSchemaStructs" }}
    {{- $schema := index . 0 }}

    {{- $namePrefix := "" }}
    {{- $numArgs := len . }}
    {{- if eq $numArgs 2 }}
     {{- $namePrefix = index . 1 }}
    {{- end }}
    {{- $namePrefix = toTitle $namePrefix }}

    {{- range $schemaName, $schemaData := $schema }}
        {{- $wasCreated := false }}
        {{- $structName := toTitle $schemaName }}
        {{- $structName = concat $namePrefix $structName }}

        {{- $isObject := eq $schemaData.Value.Type "object" }}
        {{- if or $isObject $schemaData.Value.AllOf }}
            {{- if not $schemaData.Ref }}
                {{- registerStruct $structName "pkg/api" -}}
                {{ $wasCreated = true }}
            {{- end }}
        {{- end }}
        {{- if $wasCreated }}
            {{ template "registerSchemaStructs" args $schemaData.Value.Properties $structName }}
        {{- end }}
    {{- end }}
{{- end }}

{{ define "componentSchemaStructs" }}
    {{- $schemas := index . 0 }}

    {{- $namePrefix := "" }}
    {{- $numArgs := len . }}
    {{- if eq $numArgs 2 }}
     {{- $namePrefix = index . 1 }}
    {{- end }}
    {{- $namePrefix = toTitle $namePrefix }}

    {{- range $schemaName, $schemaData := $schemas }}
        {{- $wasCreated := false }}
        {{- $structName := toTitle $schemaName }}
        {{- $structName = concat $namePrefix $structName }}

        {{- $schema := schema $structName $schemaData }}

        {{- $isObject := eq $schema.Data.Value.Type "object" }}
        {{- if or $isObject $schema.Data.Value.AllOf }}
            {{- if not $schema.Data.Ref }}
                type {{ $schema.Name }} struct {
                        {{- range $schema.Data.Value.AllOf }}
                            {{- $innerSchema := schema $structName . }}
                            {{- template "SchemaProperties" args $innerSchema "pkg/api" }}
                        {{- else }}
                            {{- template "SchemaProperties" args $schema "pkg/api" }}
                        {{- end }}
                }
                {{ $wasCreated = true }}
            {{- end }}
        {{- end }}
        {{/* Check if something was actually made before diving deeper into the struct */}}
        {{- if $wasCreated }}
            {{/* Make another struct for each applicable property */}}
            {{ template "componentSchemaStructs" args $schema.Data.Value.Properties $schema.Name }}
        {{- end }}
    {{- end }}
{{- end }}

{{ define "componentRequestBodiesStructs" }}
    {{- $requestBodies := index . 0 }}
    {{ range $requestName, $requestData := $requestBodies }}
        type {{ toTitle $requestName }} struct {
                {{- range $requestData.Value.Content }}
                    {{- $schema := schema $requestName .Schema }}
                    {{- template "SchemaProperties" args $schema "pkg/api" }}
                {{- end }}
        }
    {{- end }}
{{- end }}

{{ define "componentParameterStructs" }}
    {{- $parameters := index . 0 }}
    {{ range $parameterName, $parameterData := $parameters }}
        {{- if eq $parameterData.Value.Schema.Value.Type "object" }}
        type {{ toTitle $parameterName }} struct {
            {{ template "ParameterProperty" args $parameterData "pkg/api" }}
        }
        {{- end }}
    {{ end }}
{{- end }}